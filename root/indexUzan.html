<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="utf-8">
	<title>Projet Visualisation</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://d3js.org/topojson.v1.min.js"></script>
	<script src="js/datamaps.world.hires.min.js"></script>
<body>
  
  <div id="map" style="position: relative; width: 100%; "></div>

<script>

d3.json("json/datas.json", function(datas) {

	datas.results.forEach(function(item) {
		item.radius = 2;
 		item.count = item.nkill;
	});

	var map = new Datamap({
	    scope: 'world',
	    element: document.getElementById('map'),
	    projection: 'mercator',
	    geographyConfig:{
	    	popupOnHover : false,
	    	highlightOnHover : false,
	    	borderColor: '#444',
	        borderWidth: 0.5
	    },
	     fills: {
		   HIGH: "#afafaf",
		   LOW: "#123456",
		   MEDIUM: "blue",
		   UNKNOWN: "rgb(0,0,0)",
		   defaultFill: "green",
		   bubble: "#000000"
	      }
	})

	
	map.bubbles(datas.results, {
		popupTemplate:function(geo, datas){
			return ['<div class="hoverinfo">'+datas.targtype1+'</div>'].join('');
		}

	})

		map.legend();
	})



	
</script>
</body>